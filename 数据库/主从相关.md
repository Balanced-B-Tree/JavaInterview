[toc]



[京东二面：MySQL 主从延迟，读写分离 7 种解决方案 (qq.com)](https://mp.weixin.qq.com/s/e7g4J5G78RS0IC_ig4jcBg)，感觉写的有点水

[京东一面：MySQL 主备延迟有哪些坑？主备切换策略 (qq.com)](https://mp.weixin.qq.com/s?__biz=Mzg2NzYyNjQzNg==&mid=2247491111&idx=1&sn=202d8dcb3e551039c129ac673414559b&scene=21#wechat_redirect)



# 主库不可用，主备切换有哪些策略

## **1、可靠优先**

切换过程中，拒绝一切写操作，这样可以保证 slave上线后，是 master的完整复制

缺点：

中间有个阶段，A库和B库都是只读状态，此时系统对外不能提供写服务。



## **2、可用优先**

当然我们也可以不用等主备数据同步完成，在一开始时就直接将流量切到备库。

这样备库的流量就可能有两个来源：

- 主库之前的剩余流量 binlog
- 客户端新请求进来的流量

两部分流量冲击，会对 `数据一致性` 造成一些影响。